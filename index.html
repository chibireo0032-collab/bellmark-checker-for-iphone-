<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ™ãƒ«ãƒãƒ¼ã‚¯ãƒã‚§ãƒƒã‚«ãƒ¼ | Bellmark Checker</title>
<style>
body{
  font-family:sans-serif;
  text-align:center;
  background:#f4f8ff;
  padding:20px;
}
button{
  padding:10px 20px;
  margin:10px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:#4a90e2;
  color:white;
}
video{
  width:100%;
  max-width:300px;
  margin-top:10px;
  border-radius:10px;
}
.result{
  margin-top:20px;
  font-size:18px;
}
.box{
  background:white;
  padding:15px;
  border-radius:12px;
  margin-top:20px;
}
</style>
</head>
<body>

<h2>ãƒ™ãƒ«ãƒãƒ¼ã‚¯ãƒã‚§ãƒƒã‚«ãƒ¼</h2>
<h3>Bellmark Checker</h3>

<div class="box">
<p>
ğŸ“– ã¤ã‹ã„ã‹ãŸï¼ˆGuideï¼‰<br>
â‘  ä¸‹ã®ã€Œä½¿ã†ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚<br>
â‘¡ ã‚«ãƒ¡ãƒ©ã§ãƒ™ãƒ«ãƒãƒ¼ã‚¯ã‚’æ’®å½±ã—ã¾ã™ã€‚<br>
â‘¢ ç‚¹æ•°ã¨ã‚ã¨ä½•ç‚¹ã§è²·ãˆã‚‹ã‹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
</p>

<p>
â‘  Press "Use Camera"<br>
â‘¡ Take a picture of the bellmark<br>
â‘¢ See your total points and rewards
</p>
</div>

<button onclick="startCamera()">ğŸ“· ä½¿ã† / Use Camera</button>
<button onclick="addPoint()">ï¼‹1ç‚¹è¿½åŠ  / Add 1 Point</button>

<br>
<video id="video" autoplay playsinline></video>
<br>
<button onclick="takePhoto()">ğŸ“¸ æ’®å½± / Take Photo</button>

<div class="result" id="result"></div>

<script>
let totalPoints = 200; // â† ä»Š200ç‚¹ã‚ã‚‹ã£ã¦è¨€ã£ã¦ãŸã­

const rewards = [
  {points:100, name:"ãˆã‚“ã´ã¤ / Pencil"},
  {points:300, name:"ãƒãƒ¼ãƒˆ / Notebook"},
  {points:500, name:"ãƒœãƒ¼ãƒ« / Ball"},
  {points:1000, name:"å­¦æ ¡ã‚»ãƒƒãƒˆ / School Set"}
];

function startCamera(){
  navigator.mediaDevices.getUserMedia({video:true})
  .then(stream=>{
    document.getElementById("video").srcObject=stream;
  })
  .catch(()=>{
    alert("ã‚«ãƒ¡ãƒ©ãŒä½¿ãˆã¾ã›ã‚“ / Camera not available");
  });
}

function takePhoto(){
  // ä»Šå›ã¯ãƒ†ã‚¹ãƒˆãªã®ã§æ¯å›1ç‚¹ã¨ã—ã¦è¨ˆç®—
  totalPoints += 1;
  showResult(1);
}

function addPoint(){
  totalPoints += 1;
  showResult(1);
}

function showResult(newPoint){
  let rewardText="";
  let nextReward=null;

  for(let r of rewards){
    if(totalPoints < r.points){
      nextReward=r;
      break;
    }
  }

  if(nextReward){
    rewardText = `
    ã‚ã¨ ${nextReward.points-totalPoints} ç‚¹ã§
    ${nextReward.name} ãŒè²·ãˆã¾ã™ã€‚
    <br>
    You need ${nextReward.points-totalPoints} more points
    to get ${nextReward.name}.
    `;
  } else {
    rewardText = `
    ã™ã”ã„ï¼å…¨éƒ¨è²·ãˆã¾ã™ï¼
    <br>
    Amazing! You can get all rewards!
    `;
  }

  document.getElementById("result").innerHTML = `
    ä»Šå›ã¯ ${newPoint} ç‚¹ã§ã™ã€‚<br>
    This time: ${newPoint} point.<br><br>
    åˆè¨ˆ ${totalPoints} ç‚¹ã§ã™ã€‚<br>
    Total: ${totalPoints} points.<br><br>
    ${rewardText}
  `;
}
</script>

</body>
</html>
