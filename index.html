<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AIãƒ™ãƒ«ãƒãƒ¼ã‚¯ãƒã‚§ãƒƒã‚«ãƒ¼</title>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.9.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet"></script>

<style>
body{
  font-family:sans-serif;
  text-align:center;
  background:#eef4ff;
  padding:20px;
}
button{
  padding:10px 18px;
  margin:8px;
  font-size:16px;
  border:none;
  border-radius:8px;
  background:#4a90e2;
  color:white;
}
video{
  width:100%;
  max-width:300px;
  border-radius:12px;
}
.result{
  margin-top:20px;
  font-size:18px;
  background:white;
  padding:15px;
  border-radius:12px;
}
</style>
</head>
<body>

<h2>AI ãƒ™ãƒ«ãƒãƒ¼ã‚¯ãƒã‚§ãƒƒã‚«ãƒ¼</h2>

<button onclick="startCamera()">ğŸ“· ã‚«ãƒ¡ãƒ©é–‹å§‹</button>
<button onclick="capture()">ğŸ“¸ èªè­˜ã™ã‚‹</button>

<br>
<video id="video" autoplay playsinline></video>

<div class="result" id="result">
AIèª­ã¿è¾¼ã¿ä¸­...
</div>

<script>
let model;
let totalPoints = 0;

async function loadModel(){
  model = await mobilenet.load();
  document.getElementById("result").innerHTML = "AIæº–å‚™å®Œäº†";
}
loadModel();

function startCamera(){
  navigator.mediaDevices.getUserMedia({video:true})
  .then(stream=>{
    document.getElementById("video").srcObject = stream;
  });
}

async function capture(){
  const video = document.getElementById("video");
  const predictions = await model.classify(video);

  let isPaper = predictions[0].className.includes("paper") 
             || predictions[0].className.includes("envelope");

  if(isPaper){
    totalPoints += 1;
    document.getElementById("result").innerHTML =
      "ãƒ™ãƒ«ãƒãƒ¼ã‚¯ã®å¯èƒ½æ€§ã‚ã‚Šï¼ +1ç‚¹<br>åˆè¨ˆ: " + totalPoints + "ç‚¹";
  }else{
    document.getElementById("result").innerHTML =
      "ãƒ™ãƒ«ãƒãƒ¼ã‚¯ã§ã¯ãªã„å¯èƒ½æ€§<br>åˆ¤å®š: " + predictions[0].className;
  }
}
</script>

</body>
</html>
